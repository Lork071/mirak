/* =========================
   MIRÁK — LOCKED DARK THEME
   (PrimeVue + Sakai + Tailwind)
   ========================= */

/* 0) vynutit dark hned */
html { color-scheme: dark; }

/* 1) proměnné */
:root,
:root.app-dark,
.app-dark {
  color-scheme: dark;

  /* 🎨 Primary palette (Tailwind purple) */
--primary-50:  #ffffff;
--primary-100: #ffffff;
--primary-200: #ffffff;
--primary-300: #dfc9df;
--primary-400: #cdaacd;
--primary-500: #bb8bba; /* base */
--primary-600: #aa6ba8;
--primary-700: #91538f;
--primary-800: #724171;
--primary-900: #522f52;
--primary-950: #3a2139;

  /* aliasy */
  --primary-color:       var(--primary-500);
  --primary-color-hover: var(--primary-400);
  --primary-color-text:  #fff;

  /* odvozené akcenty (použijeme všude pro hover/selected) */
  --accent-hover:  color-mix(in srgb, var(--primary-500) 18%, transparent);
  --accent-active: color-mix(in srgb, var(--primary-500) 28%, transparent);

  /* Neutral charcoal surfaces (žádný modrý nádech) */
  --surface-ground:  #0E0E10; /* page */
  --surface-section: #0d0d0e; /* inputs / panely */
  --surface-card:    #1A1B1F; /* karty / kontejnery */
  --surface-border:  #5f5f5f;

  /* Texty */
  --text-color:           #E6E6EA; /* hlavní */
  --text-color-secondary: #A7A9B2; /* muted */
  --text-muted-color:     var(--text-color-secondary);

  /* PrimeVue text tokens */
  --p-text-color:         var(--text-color);
  --p-content-color:      var(--text-color);
  --p-muted-color:        var(--text-muted-color);
  --p-text-muted-color:   var(--text-muted-color);

  /* Surface stupnice (pro PrimeVue i Tailwind aliasy) */
  --p-surface-0:   var(--surface-ground);
  --p-surface-50:  var(--surface-section);
  --p-surface-100: var(--surface-card);
  --p-surface-200: #202127;
  --p-surface-300: #24262C;
  --p-surface-400: #282B31;
  --p-surface-500: #2C2F36;
  --p-surface-600: #31343B;
  --p-surface-700: #353941;
  --p-surface-800: #393D46;
  --p-surface-900: #3E424B;
  --p-surface-950: #42464F;

  --surface-50:  var(--p-surface-50);
  --surface-100: var(--p-surface-100);
  --surface-200: var(--p-surface-200);
  --surface-300: var(--p-surface-300);
  --surface-400: var(--p-surface-400);
  --surface-500: var(--p-surface-500);
  --surface-600: var(--p-surface-600);
  --surface-700: var(--p-surface-700);
  --surface-800: var(--p-surface-800);
  --surface-900: var(--p-surface-900);
  --surface-950: var(--p-surface-950);

  /* border & focus */
  --p-border-color: var(--surface-border);
  --p-focus-ring:   0 0 0 2px color-mix(in srgb, var(--primary-500) 35%, transparent);

  /* highlight (vybrané položky) */
  --p-highlight-background: var(--accent-active);
  --p-highlight-text-color: var(--text-color);

  /* inputs (výchozí) */
  --inp-bg:        #070707;
  --inp-bg-hover:  #131313;
  --inp-text:      #F2F3F5;
  --inp-muted:     #9AA0AE;
  --inp-border:    #3A3D45;
  --inp-focus:     color-mix(in srgb, var(--primary-500) 55%, transparent);
  --inp-invalid:   #F87171;

  /* toast */
  --toast-bg:     var(--p-surface-100);
  --toast-border: var(--p-border-color);
  --toast-text:   var(--p-text-color);
}

/* 2) base text + page bg */
html, body, .p-component { color: var(--text-color) !important; }
.app-dark body { background: var(--surface-ground) !important; }
* { color: inherit; }

/* 3) containers / cards / panels */
.app-dark .p-card,
.app-dark .p-panel,
.app-dark .p-fieldset,
.app-dark .p-toolbar,
.app-dark .p-menubar,
.app-dark .p-sidebar,
.app-dark .p-dialog,
.app-dark .p-overlaypanel,
.app-dark .p-toast,
.app-dark .p-confirm-popup,
.app-dark .p-datatable,
.app-dark .surface-section,
.app-dark .surface-card,
.app-dark .card {
  background: var(--surface-card) !important;
  color: var(--text-color) !important;
  border-color: var(--surface-border) !important;
  box-shadow: 0 1px 0 rgba(255,255,255,.02), 0 8px 24px rgba(0,0,0,.45);
}

/* Fieldset – jasnější legend a obsah */
.app-dark .p-fieldset .p-fieldset-legend { color: var(--text-color) !important; }
.app-dark .p-fieldset .p-fieldset-content { color: var(--text-color) !important; }

/* 4) utility, co často kazí barvy */
.app-dark .bg-white        { background-color: var(--surface-card) !important; }
.app-dark .text-black,
.app-dark .text-gray-900,
.app-dark .text-surface-900 { color: var(--text-color) !important; }
.app-dark .border-gray-200,
.app-dark .border-surface-200 { border-color: var(--surface-border) !important; }

/* Tailwind text-gray-* přemapované pro dark */
.app-dark .text-gray-50  { color: #F5F6F8 !important; }
.app-dark .text-gray-100 { color: #E6E6EA !important; }
.app-dark .text-gray-200 { color: #CFD1D6 !important; }
.app-dark .text-gray-300 { color: #B9BCC4 !important; }
.app-dark .text-gray-400 { color: #A3A7B1 !important; }
.app-dark .text-gray-500 { color: #8C92A0 !important; }
.app-dark .text-gray-600 { color: #7A808E !important; }
.app-dark .text-gray-700 { color: #636363 !important; }
.app-dark .text-gray-800 { color: #494949 !important; }
.app-dark .text-gray-900 { color: #252525 !important; }
.app-dark .text-900,
.app-dark .text-surface-800,
.app-dark .text-surface-900 { color: var(--text-color) !important; }

/* 5) inputs – jednotný vzhled */
.app-dark .p-inputtext,
.app-dark .p-inputtextarea,
.app-dark .p-inputnumber-input,
.app-dark .p-password-input,
.app-dark .p-calendar .p-inputtext,
.app-dark .p-autocomplete .p-inputtext,
.app-dark .p-chips .p-inputtext,
.app-dark .p-dropdown,
.app-dark .p-dropdown .p-inputtext,
.app-dark .p-multiselect,
.app-dark .p-multiselect .p-inputtext {
  background: var(--inp-bg) !important;
  color: var(--inp-text) !important;
  border: 1px solid var(--inp-border) !important;
  box-shadow: none !important;
  outline: none !important;
  caret-color: var(--inp-text);
}
.app-dark .p-dropdown-label,
.app-dark .p-multiselect-label { color: var(--inp-text) !important; }

.app-dark .p-inputtext::placeholder,
.app-dark .p-inputtextarea::placeholder,
.app-dark .p-dropdown-label.p-placeholder,
.app-dark .p-multiselect-label.p-placeholder {
  color: var(--inp-muted) !important;
  opacity: 1 !important;
}

.app-dark .p-inputtext ~ .p-inputtext-icon,
.app-dark .p-input-icon-left > i,
.app-dark .p-input-icon-right > i { color: var(--inp-muted) !important; }

.app-dark .p-inputtext:hover,
.app-dark .p-inputtextarea:hover,
.app-dark .p-inputnumber-input:hover,
.app-dark .p-dropdown:not(.p-disabled):hover,
.app-dark .p-multiselect:not(.p-disabled):hover {
  background: var(--inp-bg-hover) !important;
  border-color: var(--p-surface-300) !important;
}

.app-dark .p-inputtext:focus,
.app-dark .p-inputtextarea:focus,
.app-dark .p-inputnumber-input:focus,
.app-dark .p-password-input:focus,
.app-dark .p-calendar .p-inputtext:focus,
.app-dark .p-dropdown:focus-within,
.app-dark .p-multiselect:focus-within {
  background: var(--inp-bg-hover) !important;
  border-color: var(--primary-500) !important;
  box-shadow: 0 0 0 2px var(--inp-focus) !important;
}

.app-dark .p-inputtext.p-invalid,
.app-dark .p-inputtextarea.p-invalid,
.app-dark .p-dropdown.p-invalid,
.app-dark .p-multiselect.p-invalid,
.app-dark .p-calendar.p-invalid .p-inputtext,
.app-dark .p-inputnumber.p-invalid .p-inputnumber-input {
  border-color: var(--inp-invalid) !important;
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--inp-invalid) 35%, transparent) !important;
}

.app-dark .p-inputtext:disabled,
.app-dark .p-inputtextarea:disabled,
.app-dark .p-inputnumber-input:disabled,
.app-dark .p-dropdown.p-disabled,
.app-dark .p-multiselect.p-disabled {
  background: #0F1013 !important;
  color: #B9BDC6 !important;
  border-color: #2E3036 !important;
  opacity: .9 !important;
  cursor: not-allowed;
}

/* autofill */
.app-dark input:-webkit-autofill,
.app-dark textarea:-webkit-autofill {
  -webkit-text-fill-color: var(--inp-text) !important;
  box-shadow: 0 0 0 1000px var(--inp-bg) inset !important;
  transition: background-color 9999s ease;
}

/* 6) dropdown/listbox panely */
.app-dark .p-dropdown-panel,
.app-dark .p-multiselect-panel,
.app-dark .p-autocomplete-panel,
.app-dark .p-calendar .p-datepicker {
  background: var(--inp-bg) !important;
  color: var(--inp-text) !important;
  border: 1px solid var(--inp-border) !important;
  box-shadow: 0 12px 32px rgba(0,0,0,.5) !important;
}
.app-dark .p-dropdown-item,
.app-dark .p-multiselect-item,
.app-dark .p-listbox .p-listbox-item { color: var(--inp-text) !important; }

/* highlight & hover položek – z primary akcentu */
.app-dark .p-highlight {
  background: var(--accent-active) !important;
  color: var(--text-color) !important;
}
.app-dark .p-dropdown-item:hover,
.app-dark .p-multiselect-item:hover,
.app-dark .p-listbox .p-listbox-item:hover { background: var(--accent-hover) !important; }
.app-dark .p-dropdown-item.p-highlight:hover,
.app-dark .p-multiselect-item.p-highlight:hover,
.app-dark .p-listbox .p-listbox-item.p-highlight:hover { background: var(--accent-hover) !important; }

/* 7) Buttons */
.app-dark .p-button:hover:not(.p-disabled),
.app-dark .p-button:active:not(.p-disabled),
.app-dark .p-button:focus-visible:not(.p-disabled) {
  background: var(--accent-hover) !important;
  border-color: var(--  -500) !important;
  color: var(--primary-color-text) !important;
}
.app-dark .p-button.p-button-primary { background: var(--primary-500) !important; border-color: var(--primary-500) !important; }
.app-dark .p-button.p-button-primary:hover { background: var(--accent-hover) !important; }
.app-dark .p-button.p-button-outlined:hover { background: var(--accent-hover) !important; border-color: var(--primary-500) !important; }

/* 8) Tabs, Menu, Paginator */
.app-dark .p-tabview .p-tabview-nav li:not(.p-highlight):hover a,
.app-dark .p-menuitem:not(.p-highlight):hover > .p-menuitem-link,
.app-dark .p-paginator .p-paginator-page:not(.p-highlight):hover {
  background: var(--accent-hover) !important;
}
.app-dark .p-paginator .p-paginator-page.p-highlight {
  background: var(--accent-active) !important;
  color: var(--primary-color-text) !important;
  border-color: var(--primary-500) !important;
}

/* 9) Datatable */
.app-dark .p-datatable .p-datatable-thead > tr > th {
  background: var(--surface-card) !important;
  color: var(--text-color-secondary) !important;
  border-color: var(--surface-border) !important;
}
.app-dark .p-datatable .p-datatable-tbody > tr {
  background: var(--surface-card) !important;
  color: var(--text-color) !important;
}
.app-dark .p-datatable .p-datatable-tbody > tr:hover {
  background: var(--surface-section) !important;
}
.app-dark .p-datatable .p-datatable-tbody > tr.p-highlight {
  background: var(--accent-active) !important;
  color: var(--text-color) !important;
}

/* 10) Toast (tmavý + barevný akcent) */
.p-toast { background: transparent !important; }
.app-dark .p-toast .p-toast-message {
  position: relative;
  margin: 0 !important;
  color: var(--toast-text) !important;
  border: 1px solid var(--toast-border) !important;
  background:
    linear-gradient(var(--toast-accent-bg, transparent), var(--toast-accent-bg, transparent)) padding-box,
    var(--toast-bg) border-box !important;
  box-shadow: 0 8px 24px rgba(0,0,0,.35) !important;
  border-radius: .75rem;
  overflow: hidden;
}
.app-dark .p-toast .p-toast-message::before {
  content: "";
  position: absolute; left: 0; top: 0; bottom: 0; width: 4px;
  background: var(--toast-accent, var(--primary-500));
}
.app-dark .p-toast .p-toast-message .p-toast-message-icon { color: var(--toast-accent, var(--primary-500)) !important; }
.app-dark .p-toast .p-toast-icon-close { color: var(--toast-text) !important; border-radius: .5rem; }
.app-dark .p-toast .p-toast-icon-close:hover { background: var(--accent-hover) !important; }
.app-dark .p-toast .p-toast-message .p-toast-message-content,
.app-dark .p-toast .p-toast-message .p-toast-summary,
.app-dark .p-toast .p-toast-message .p-toast-detail { color: var(--toast-text) !important; }

/* severity akcenty */
.app-dark .p-toast-message-info    { --toast-accent:#60A5FA; --toast-accent-bg: color-mix(in srgb, #60A5FA 12%, transparent); }
.app-dark .p-toast-message-success { --toast-accent:#34D399; --toast-accent-bg: color-mix(in srgb, #34D399 12%, transparent); }
.app-dark .p-toast-message-warn    { --toast-accent:#FBBF24; --toast-accent-bg: color-mix(in srgb, #FBBF24 12%, transparent); }
.app-dark .p-toast-message-error   { --toast-accent:#F87171; --toast-accent-bg: color-mix(in srgb, #F87171 12%, transparent); }


/* ===== Accordion: card look, bez borderů/zaoblení/změny bg a bez fialového focusu ===== */
.app-dark .p-accordion,
.app-dark .p-accordion .p-accordion-tab,
.app-dark .p-accordion .p-accordion-header,
.app-dark .p-accordion .p-accordion-header .p-accordion-header-link,
.app-dark .p-accordion .p-accordion-content {
  background: var(--surface-card) !important;
  color: var(--text-color) !important;
  border: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}

/* otevřený stav – stejné bg, žádné zvýraznění */
.app-dark .p-accordion .p-accordion-tab.p-accordion-tab-active > .p-accordion-header,
.app-dark .p-accordion .p-accordion-tab.p-accordion-tab-active > .p-accordion-content,
.app-dark .p-accordion .p-accordion-header.p-highlight {
  background: var(--surface-card) !important;
  border: 0 !important;
  box-shadow: none !important;
}

/* žádná změna při hoveru */
.app-dark .p-accordion .p-accordion-header:hover,
.app-dark .p-accordion .p-accordion-tab:hover > .p-accordion-header {
  background: var(--surface-card) !important;
}

/* vypnout focus ring jen v akordeonu (ten fialový obrys) */
.app-dark .p-accordion .p-accordion-header:focus,
.app-dark .p-accordion .p-accordion-header:focus-visible,
.app-dark .p-accordion .p-accordion-header .p-accordion-header-link:focus,
.app-dark .p-accordion .p-accordion-header .p-accordion-header-link:focus-visible,
.app-dark .p-accordion .p-accordion-tab.p-focus > .p-accordion-header {
  outline: none !important;
  box-shadow: none !important;
}

/* některé buildy kreslí separátor jako ::before – vypnout */
.app-dark .p-accordion .p-accordion-header::before,
.app-dark .p-accordion .p-accordion-content::before {
  content: none !important;
}

/* ikona/chevron vpravo – jen barva textu */
.app-dark .p-accordion .p-accordion-toggle-icon,
.app-dark .p-accordion .p-accordion-header-icon {
  color: var(--text-color) !important;
}


/* Select = stejné pozadí jako card */
:root.app-dark, .app-dark {
  --p-select-background: var(--inp-bg);
  --p-select-option-background: var(--surface-card);
}

/* PrimeVue Select (nové i starší názvy tříd) */
.app-dark .p-select,
.app-dark .p-select-panel,
.app-dark .p-select-list,
.app-dark .p-select-option,
.app-dark .p-select-label,
.app-dark .p-select-trigger {
  background: var(---inp-bg) !important;
  color: var(--text-color) !important;
  border-color: var(--surface-border) !important;
}

/* Dropdown/MultiSelect panely – pro jistotu sjednocené taky na card */
.app-dark .p-dropdown-panel,
.app-dark .p-multiselect-panel {
  background: var(--inp-bg) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--surface-border) !important;
}

/* Hover/selected stavy tmavým akcentem, ne světle */
.app-dark .p-select-option:hover,
.app-dark .p-dropdown-item:hover,
.app-dark .p-multiselect-item:hover {
  background: var(--accent-hover) !important;
}
.app-dark .p-select-option.p-highlight,
.app-dark .p-dropdown-item.p-highlight,
.app-dark .p-multiselect-item.p-highlight {
  background: var(--accent-active) !important;
  color: var(--text-color) !important;
}
:root.app-dark, .app-dark {
  /* Accordion background fix */
  --p-accordion-header-background: var(--surface-card);
  --p-accordion-content-background: var(--surface-card);

  /* Overlay fix */
  --surface-overlay: var(--surface-card);
}

/* PrimeVue Accordion override */
.app-dark .p-accordion-header,
.app-dark .p-accordion-content {
  background: var(--surface-card) !important;
  border: none !important;
}

/* PrimeVue overlay components */
.app-dark .p-overlay,
.app-dark .p-overlay-panel {
  background: var(--surface-card) !important;
  border: 1px solid var(--surface-border) !important;
}

:root.app-dark, .app-dark {
  /* Accordion */
  --p-accordion-header-background: var(--surface-card);
  --p-accordion-content-background: var(--surface-card);

  /* DataTable */
  --p-datatable-header-background: var(--surface-card);

  /* Overlay */
  --surface-overlay: var(--surface-card);
}

/* PrimeVue DataTable override */
.app-dark .p-datatable-header {
  background: var(--surface-card) !important;
  border: none !important;
}

:root.app-dark, .app-dark {
  /* Accordion */
  --p-accordion-header-background: var(--surface-card);
  --p-accordion-content-background: var(--surface-card);

  /* DataTable */
  --p-datatable-header-background: var(--surface-card);

  /* Overlay */
  --surface-overlay: var(--surface-card);

  /* Paginator */
  --p-paginator-background: var(--surface-card);
}

:root.app-dark, .app-dark {
  /* Accordion */
  --p-accordion-header-background: var(--surface-card);
  --p-accordion-header-active-background: var(--surface-card);
  --p-accordion-content-background: var(--surface-card);

  /* DataTable */
  --p-datatable-header-background: var(--surface-card);

  /* Overlay */
  --surface-overlay: var(--surface-card);

  /* Paginator */
  --p-paginator-background: var(--surface-card);
}

.app-dark .p-toast {
  background: transparent !important;
  box-shadow: none !important;
}


.app-dark {
  --p-floatlabel-color: var(--p-text-color) !important;
  --p-floatlabel-focus-color: var(--primary-400) !important; /* při focusu lehce barevné */
}
.app-dark {
  --p-textarea-background: var(--inp-bg) !important;
}

/* ==== Message (dark) – podklad z akcentu (60 % průhlednost) + akcent border ==== */
.app-dark .p-message,
.app-dark .p-message .p-message-wrapper {
  background-color: color-mix(in srgb, var(--_msg-accent) 20%, transparent) !important; /* 60 % průhledné */
  border: 1px solid var(--_msg-accent) !important;
  color: var(--text-color) !important;
  box-shadow: none !important;
}

/* ikonka a close tlačítko */
.app-dark .p-message .p-message-icon {
  color: var(--_msg-accent) !important;
}
.app-dark .p-message .p-message-close {
  color: var(--text-color) !important;
}
.app-dark .p-message .p-message-close:hover {
  background: color-mix(in srgb, var(--_msg-accent) 15%, transparent) !important;
}

/* texty uvnitř */
.app-dark .p-message .p-message-summary,
.app-dark .p-message .p-message-detail {
  color: var(--text-color) !important;
}

/* severity akcenty */
.app-dark .p-message-info    { --_msg-accent:#60A5FA; }
.app-dark .p-message-success { --_msg-accent:#34D399; }
.app-dark .p-message-warn    { --_msg-accent:#FBBF24; }
.app-dark .p-message-error   { --_msg-accent:#F87171; }

